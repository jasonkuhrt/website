/* Import generated design tokens */
@import './tokens.generated.css';

/* Import variable fonts */
@import '@fontsource-variable/inter';
@import '@fontsource-variable/newsreader';
@import '@fontsource/jetbrains-mono';

/**
 * Baseline Grid System
 * 6px baseline unit - divides cleanly into 24px, 30px, 36px line heights
 * Uses modern `cap` unit for precise baseline alignment
 */

/* CSS Reset */
*, *::before, *::after {
  box-sizing: border-box;
}

html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  margin: 0;
  padding: 0;
  font-family: var(--typography-font-family-sans);
  font-size: var(--typography-font-size-base);
  color: var(--color-text-primary);
  background-color: var(--color-bg-default);

  /* Enable optical sizing for variable fonts */
  font-optical-sizing: auto;
}

/* Baseline Grid Typography - All elements snap to 6px grid */
h1, h2, h3, h4, h5, h6 {
  margin: 0;
  color: var(--color-text-primary);
  font-family: var(--typography-font-family-sans);
}

h1 {
  font-size: var(--typography-font-size-3xl);
  font-weight: var(--typography-font-weight-bold);
  line-height: calc(10 * var(--baseline-unit)); /* 60px */
  padding-top: calc((calc(10 * var(--baseline-unit)) - 1cap) / 2);
  margin-bottom: calc(calc(4 * var(--baseline-unit)) - calc((calc(10 * var(--baseline-unit)) - 1cap) / 2));
  letter-spacing: -0.025em;
}

h2 {
  font-size: var(--typography-font-size-2xl);
  font-weight: var(--typography-font-weight-bold);
  line-height: calc(8 * var(--baseline-unit)); /* 48px */
  padding-top: calc((calc(8 * var(--baseline-unit)) - 1cap) / 2);
  margin-bottom: calc(calc(3 * var(--baseline-unit)) - calc((calc(8 * var(--baseline-unit)) - 1cap) / 2));
  letter-spacing: -0.02em;
}

h3 {
  font-size: var(--typography-font-size-xl);
  font-weight: var(--typography-font-weight-semibold);
  line-height: calc(6 * var(--baseline-unit)); /* 36px */
  padding-top: calc((calc(6 * var(--baseline-unit)) - 1cap) / 2);
  margin-bottom: calc(calc(3 * var(--baseline-unit)) - calc((calc(6 * var(--baseline-unit)) - 1cap) / 2));
}

h4 {
  font-size: var(--typography-font-size-lg);
  font-weight: var(--typography-font-weight-semibold);
  line-height: calc(5 * var(--baseline-unit)); /* 30px */
  padding-top: calc((calc(5 * var(--baseline-unit)) - 1cap) / 2);
  margin-bottom: calc(calc(2 * var(--baseline-unit)) - calc((calc(5 * var(--baseline-unit)) - 1cap) / 2));
}

p {
  margin: 0;
  font-size: var(--typography-font-size-base);
  line-height: calc(4 * var(--baseline-unit)); /* 24px */
  padding-top: calc((calc(4 * var(--baseline-unit)) - 1cap) / 2);
  margin-bottom: calc(calc(2 * var(--baseline-unit)) - calc((calc(4 * var(--baseline-unit)) - 1cap) / 2));
  color: var(--color-text-secondary);
}

a {
  color: inherit;
  text-decoration: none;
  transition: color var(--effects-transition-fast);
}

a:hover {
  color: var(--color-accent-default);
}

/* Prose styles for MDX content */
.prose {
  font-family: var(--typography-font-family-serif);
  font-optical-sizing: auto;
  max-width: 65ch;
  color: var(--color-text-secondary);
}

.prose h1,
.prose h2,
.prose h3 {
  font-family: var(--typography-font-family-sans);
  color: var(--color-text-primary);
}

.prose h1 {
  margin-top: 0;
  margin-bottom: calc(4 * var(--baseline-unit));
}

.prose h2 {
  margin-top: calc(8 * var(--baseline-unit));
  margin-bottom: calc(4 * var(--baseline-unit));
}

.prose h3 {
  margin-top: calc(6 * var(--baseline-unit));
  margin-bottom: calc(3 * var(--baseline-unit));
}

.prose p {
  margin-top: calc(4 * var(--baseline-unit));
  margin-bottom: calc(4 * var(--baseline-unit));
  font-family: var(--typography-font-family-serif);
}

.prose p:first-of-type {
  font-size: var(--typography-font-size-md);
  line-height: calc(4 * var(--baseline-unit));
}

.prose a {
  color: var(--color-accent-default);
  text-decoration: underline;
  text-decoration-thickness: 1px;
  text-underline-offset: 2px;
  transition: all var(--effects-transition-fast);
}

.prose a:hover {
  color: var(--color-accent-dark);
  text-decoration-thickness: 2px;
}

.prose strong {
  font-weight: var(--typography-font-weight-semibold);
  color: var(--color-text-primary);
}

.prose ul,
.prose ol {
  margin-top: calc(4 * var(--baseline-unit));
  margin-bottom: calc(4 * var(--baseline-unit));
  padding-left: calc(5 * var(--spacing-base-1));
}

.prose li {
  margin-top: calc(2 * var(--baseline-unit));
  margin-bottom: calc(2 * var(--baseline-unit));
}

.prose blockquote {
  margin-top: calc(6 * var(--baseline-unit));
  margin-bottom: calc(6 * var(--baseline-unit));
  padding-left: var(--spacing-base-4);
  border-left: 3px solid var(--color-border-default);
  font-style: italic;
  color: var(--color-text-secondary);
}

.prose hr {
  margin-top: calc(8 * var(--baseline-unit));
  margin-bottom: calc(8 * var(--baseline-unit));
  border: none;
  border-top: 1px solid var(--color-border-default);
}

/* Code blocks */
code {
  font-family: var(--typography-font-family-mono);
  font-variant-ligatures: contextual;
  font-size: 0.9em;
}

:not(pre) > code {
  padding: 0.125rem 0.25rem;
  border-radius: var(--effects-radius-sm);
  background-color: var(--color-bg-subtle);
  color: var(--color-text-primary);
}

pre {
  font-family: var(--typography-font-family-mono);
  overflow-x: auto;
  padding: var(--spacing-base-4);
  border-radius: var(--effects-radius-base);
  border: 1px solid var(--color-border-default);
  margin: calc(4 * var(--baseline-unit)) 0;
  font-size: 0.875rem;
  line-height: calc(3 * var(--baseline-unit));
}

pre code {
  padding: 0;
  background: none;
  border-radius: 0;
  font-size: inherit;
}

/* Shiki syntax highlighting */
pre.shiki,
pre.shiki span {
  font-family: var(--typography-font-family-mono);
}

pre.shiki span {
  color: var(--shiki-light);
}

.dark pre.shiki span {
  color: var(--shiki-dark);
}

/* Images */
img {
  max-width: 100%;
  height: auto;
}

.dark img.invert-dark {
  filter: invert(1) hue-rotate(180deg);
}

/* Selection */
::selection {
  background: var(--color-accent-light, hsl(210, 50%, 90%));
  color: var(--color-accent-default);
}

/* Lists */
ul, ol {
  margin: 0;
  padding: 0;
  list-style-position: outside;
}

li {
  margin-top: var(--spacing-base-1);
}

/* Per-article custom styles */
article[data-article="forto"] img {
  filter: saturate(0.6);
}

/* View Transitions */
@view-transition {
  navigation: auto;
}

::view-transition-group(main-content) {
  animation-duration: 100ms;
  animation-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);
}

::view-transition-old(main-content) {
  animation: slide-down-fade-out 100ms cubic-bezier(0.33, 1, 0.68, 1) forwards;
  will-change: transform, opacity;
  backface-visibility: hidden;
  perspective: 1000px;
}

::view-transition-new(main-content) {
  animation: slide-up-fade-in 100ms cubic-bezier(0.32, 0, 0.67, 0) forwards;
  will-change: transform, opacity;
  backface-visibility: hidden;
  perspective: 1000px;
}

@keyframes slide-down-fade-out {
  from {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
  to {
    opacity: 0;
    transform: translate3d(0, 16px, 0);
  }
}

@keyframes slide-up-fade-in {
  from {
    opacity: 0;
    transform: translate3d(0, 8px, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}
