---
import { getCollection } from 'astro:content'
import Page from '../../layouts/Page.astro'
import Section from '../../components/Section.astro'
import { format } from 'date-fns'
import { render } from 'astro:content'

export const getStaticPaths = async () => {
  const writing = await getCollection('writing')
  return writing.map((item) => ({
    params: { slug: item.id },
    props: { item },
  }))
}

const { item } = Astro.props
const { Content } = await render(item)
---

<Page title={item.data.title} constrainWidth={false}>
  <Section spacing="xl">
    <div class="container">
      <article class="max-w-3xl mx-auto">
        <!-- Header -->
        <header class="mb-12 pb-8 border-b border-gray-200 dark:border-gray-800">
          <h1 class="text-4xl font-bold mb-4 leading-tight">{item.data.title}</h1>
          <time
            datetime={item.data.date.toISOString()}
            class="text-sm text-gray-500 dark:text-gray-400 font-mono"
          >
            {format(item.data.date, 'LLLL dd, yyyy')}
          </time>
        </header>

        <!-- Content -->
        <div class="prose prose-lg prose-gray dark:prose-invert max-w-none">
          <Content />
        </div>
      </article>
    </div>
  </Section>
</Page>
