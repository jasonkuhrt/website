<!doctype html>
<html lang="en" style="scroll-behavior: smooth;">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico?v=3" sizes="256 Ã— 256" />
    <link rel="icon" href="/favicon.svg?v=3" sizes="any" type="image/svg+xml" />

    %sveltekit.head%

    <script>
      // Immediately apply theme before page renders to prevent flash
      ;(function () {
        function applyThemeClasses() {
          const getSystemTheme = () =>
            window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
          const storedMode = localStorage.getItem('themeMode') || 'system'

          document.documentElement.classList.remove('dark', 'light', 'system')

          if (storedMode === 'system') {
            document.documentElement.classList.add('system', getSystemTheme())
          } else {
            document.documentElement.classList.add(storedMode)
          }
        }

        // Apply immediately
        applyThemeClasses()

        // Re-apply after navigation
        document.addEventListener('sveltekit:after-navigate', applyThemeClasses)
      })()
    </script>
  </head>
  <body class="flex items-center flex-col mb-[50vh]">
    %sveltekit.body%
  </body>
</html>
